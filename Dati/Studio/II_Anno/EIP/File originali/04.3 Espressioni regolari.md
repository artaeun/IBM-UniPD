# 04.3 Espressioni regolari

#### Cosa sono?
In informatica, un'espressione regolare, detta anche "regex" o "regexp", fornisce un mezzo conciso e flessibile per trovare corrispondenze di stringhe di testo, come particolari caratteri, parole o pattern di caratteri.

Un'espressione regolare è scritta in un linguaggio formale che può essere interpretato da un processore di espressioni regolari.
| Carattere | Come funziona |
| --------- | ------------- |
| ^ | Corrisponde all'inizio di una riga |
| $ | Corrisponde alla fine di una riga |
| . | Corrisponde a qualsiasi carattere |
| \s | Corrisponde a uno spazio bianco |
| \S | Corrisponde a qualsiasi carattere non-spazio |
| \d | Corrisponde a una cifra |
| \D | Corrisponde a qualsiasi carattere non-cifra |
| * | Ripete un carattere zero o più volte |
| *? | Ripete un carattere zero o più volte (non-greedy) |
| + | Ripete un carattere una o più volte |
| +? | Ripete un carattere una o più volte (non-greedy) |
| [aeiou] | Corrisponde a un singolo carattere nell'insieme elencato |
| [^XYZ] | Corrisponde a un singolo carattere non nell'insieme elencato |
| [a-z0-9] | L'insieme di caratteri può includere un range |
| ( | Indica dove inizia l'estrazione della stringa |
| ) | Indica dove termina l'estrazione della stringa |


```python
import re
re.search()   # restituisce un oggetto match
re.findall()  # estrae porzioni di una stringa che corrispondono all'espressione regolare
```
##### find() 
```python
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if line.find('From:') >= 0:
        print(line)
```
##### vs re.search()
```python
import re

hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    y = re.search('From:', line)
    if y is not None:
        print(line)
```
* Il carattere punto corrisponde a qualsiasi carattere
* Se aggiungi il carattere asterisco, il carattere è "un numero qualsiasi di volte"
* ^ => corrisponde all'inizio della riga

Caratteri WildCard es.: _^X.*:_ => corrisponde a qualsiasi carattere zero o più volte
Caratteri WildCard es. 2: _^X-\S+:_ => corrisponde a qualsiasi carattere non-spazio una o più volte

Altro esempio:
```python
>>> import re
>>> x = 'My 2 favorite numbers are 19 and 42'
>>> y = re.findall('[0-9]+',x)
>>> print(y)
['2', '19', '42']
```

Quando usiamo re.findall(), restituisce una lista di zero o più sotto-stringhe che corrispondono all'espressione regolare.

```python
>>> import re
>>> x = 'My 2 favorite numbers are 19 and 42'
>>> y = re.findall('[0-9]+',x)
>>> print(y)
['2', '19', '42']
>>> y = re.findall('[AEIOU]+',x)
>>> print(y)
[]
```

#### Corrispondenza Greedy (avida)

I caratteri di ripetizione (* e +) si espandono verso l'esterno in entrambe le direzioni (greedy) per corrispondere alla stringa più grande possibile.

```python
>>> import re
>>> x = 'From: Using the : character'
>>> y = re.findall('^F.+:', x)
>>> print(y)
['From: Using the :']
```

#### Corrispondenza Non-Greedy

Non tutti i codici di ripetizione delle espressioni regolari sono greedy! Se aggiungi un carattere ?, i + e * si calmano un po'...


```python
>>> import re
>>> x = 'From: Using the : character'
>>> y = re.findall('^F.+?:', x)
>>> print(y)
['From:']
```

Puoi anche sbizzarrirti con l'estrazione di stringhe:

```python
>>> y = re.findall('\S+@\S+', x)
>>> print(y)
['stephen.marquard@uct.ac.za']
```

Ci sono maggiori dettagli nelle slide sulle Espressioni Regolari. Consultale se ne hai bisogno.